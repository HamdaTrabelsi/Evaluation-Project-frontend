<h1 mat-dialog-title>Ajouter une Classe</h1>

<mat-dialog-content class="mat-typography mt-2">
    <div>
        <form [formGroup]="classeForm">
            <div class="mb-3 mt-3">
                <h6 class="form-label">Nom</h6>
                <input [formControlName]="'nom'" class="form-control" type="text" required>

                <div class="text text-danger mt-1" *ngIf="classeForm.get('nom').hasError('required') && classeForm.get('nom').touched">
                    Le nom de la classe est requis
                </div>
            </div>

            <div class="mb-3 mt-3">
                <h6 class="form-label">Année Universitaire</h6>
                <ng-select [items]="yearRanges" bindLabel="nom" id="anneeUniversitaire"
                           placeholder="Année Universitaire" formControlName="anneeUniversitaire" required>
                </ng-select>
                <div class="text text-danger mt-1" *ngIf="classeForm.get('anneeUniversitaire').hasError('required') && classeForm.get('anneeUniversitaire').touched">
                    L'année universitaire est requise
                </div>
            </div>

            <div class="mb-3 mt-3">
                <h6 class="form-label">Department *</h6>
                <ng-select [items]="departements" bindLabel="departements" id="departements"
                           placeholder="Departement" formControlName="departement" [searchFn]="customSearchFn" required>
                    <ng-template ng-label-tmp let-item="item">
                        {{item.nom}}
                    </ng-template>

                    <ng-template ng-option-tmp let-item="item" let-search="searchTerm">
                        {{item.nom}}
                    </ng-template>
                </ng-select>
                <div class="text text-danger mt-1" *ngIf="classeForm.get('departement').hasError('required') && classeForm.get('departement').touched">
                    Le departement est requis
                </div>
            </div>

            <div class="mb-3 mt-3">
                <h6 class="form-label">Nombre d'étudiants</h6>
                <input [formControlName]="'nbEtudiants'" class="form-control" type="text" required>

                <div class="text text-danger mt-1" *ngIf="classeForm.get('nbEtudiants').hasError('required') && classeForm.get('nbEtudiants').touched">
                    Le nombre d'étudiants est requis
                </div>
            </div>

            <div class="mb-3 mt-3">
                <h6 class="form-label">Nombre d'enseignants</h6>
                <input [formControlName]="'nbEnseignants'" class="form-control" type="text" required>

                <div class="text text-danger mt-1" *ngIf="classeForm.get('nbEnseignants').hasError('required') && classeForm.get('nbEnseignants').touched">
                    Le nom d'étudiants est requis
                </div>
            </div>

        </form>
    </div>
    <div class="modal-footer">
        <button type="button" [disabled]="classeForm.invalid" class="btn btn-outline-secondary" (click)="ajouterClasse()">Ajouter</button>
    </div>
</mat-dialog-content>
